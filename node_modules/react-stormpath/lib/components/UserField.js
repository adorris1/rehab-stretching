'use strict';

exports.__esModule = true;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _UserComponent2 = require('./UserComponent');

var _UserComponent3 = _interopRequireDefault(_UserComponent2);

var UserField = (function (_UserComponent) {
  _inherits(UserField, _UserComponent);

  function UserField() {
    _classCallCheck(this, UserField);

    _UserComponent.apply(this, arguments);
  }

  UserField.prototype._resolveFieldValue = function _resolveFieldValue(name) {
    var value = this.state.user;
    var keys = name.split('.');

    while (keys.length) {
      var key = keys.shift();

      if (!(key in value)) {
        throw new Error('Field does not exist');
      }

      value = value[key];
    }

    return value;
  };

  UserField.prototype.render = function render() {
    var fieldName = this.props.fieldName;
    var fieldValue = null;

    try {
      fieldValue = this._resolveFieldValue(fieldName);
    } catch (e) {
      if ('default' in this.props) {
        fieldValue = this.props['default'];
      }
    }

    return _react2['default'].createElement(
      'span',
      { className: this.props.className },
      fieldValue
    );
  };

  return UserField;
})(_UserComponent3['default']);

exports['default'] = UserField;
module.exports = exports['default'];